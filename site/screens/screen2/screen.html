<div class="screen-container">
    <div class="flavio-principal">
        <div class="flavio-aguadando-gif">
            <div class="flavio-aguardando">
                <p class="flavio-p-figura">
                    <img src="images/aguardando_jogador.png" />
                </p>
            </div>
            <div class="flavio-gif">
                <p class="flavio-gif-text">
                    <img src="images/espera2.gif" class="flavio-gif-espera" />
                </p>
            </div>
        </div>
        <div>
            <p class="flavio-compartilhe">
                Compartilhe a chave de acesso com o seu oponente
            </p>
        </div>
        <div class="flavio-chave-acesso">
            <div class="flavio-chave-texto">
                <p>Chave de acesso</p>
            </div>
            <div class="flavio-numero">
                <div class="flavio-chave-numero">
                    <p id="key-number">------</p>
                </div>
                <button class="flavio-chave-botao" onclick="saveKey(this)">
                    <p class="flavio-copiar-chave">Copiar chave</p>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    functionCallRegister.register(WAITING_FOR_SECOND_PLAYER_SCREEN, loadScreen2)

    function loadScreen2({token}) {
        document.getElementById('key-number').innerHTML = token
        document.getElementById('key-number').dataset.token = token
    }
    
    function saveKey(button) {
        button.focus()
        if (navigator && navigator.clipboard && navigator.clipboard.writeText){
            navigator.clipboard.writeText(document.getElementById('key-number').dataset.token).then(
                () => {
                    document.getElementById('key-number').innerHTML = 'Copiado'
                },
                (err) => {
                    console.error(err, 'clipboard write failed')
                    document.getElementById('key-number').innerHTML = 'Erro ao copiar'
                }
            )
        }
    }
</script>