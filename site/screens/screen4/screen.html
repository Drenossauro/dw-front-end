<div class="screen-container">    
    <div class="emanuel-main-4">
        <div id="emanuel-jogador">
            <img src="images/mensagem.png" alt="mensagem">
        </div>

        <div id="emanuel-lupa">
            <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
            <lottie-player src="https://assets6.lottiefiles.com/packages/lf20_n4RinHSVJ4.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop  autoplay></lottie-player>
        </div>
    </div>
</div>

<script>
    functionCallRegister.register(WAITING_SCREEN, loadScreen4)

    function loadScreen4() {
        const token = sessionStorage.getItem('token')
        const currentPlayer = parseInt(sessionStorage.getItem('player'))

        const intervalId = setInterval(() => {
            axios.get(`${URL_EXISTING_GAME}?token_da_sala=${token}`)
                .then(function (response) {
                    if (response.data['quem-joga'] == currentPlayer) {
                        clearInterval(intervalId)

                        const {player1, player2} = response.data
                        sessionStorage.setItem('game', JSON.stringify({ player1, player2 }))

                        // fazer algoritmo que acha se o player acertou ou nao
                        // fazer um algorimo que manda pra tela X por Y tempo depois manda pra tela Z definitivamente

                        if (response.data.status == 'upload') {
                            showScreen(UPLOAD_SCREEN, {tip: response.data['palavra-chave']})
                        } else {
                            showScreen(DRAW_SCREEN)
                        }
                    }
                }).catch(function (error) {
                    toast(error);
                })  
        }, 1000)
    }
</script>